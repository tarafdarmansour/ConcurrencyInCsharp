# مثال‌های کاربردی Dataflow در C#

این پروژه شامل مثال‌های عملی برای استفاده از کتابخانه `System.Threading.Tasks.Dataflow` است.

## نصب وابستگی‌ها

```bash
dotnet restore
```

## اجرای پروژه

```bash
dotnet run
```

## مثال‌های موجود

### مثال 1: پایپ لاین ساده
یک پایپ لاین ساده که اعداد را دریافت کرده، مربع آنها را محاسبه می‌کند و نتیجه را نمایش می‌دهد.

**ویژگی‌ها:**
- استفاده از `BufferBlock` برای ورودی
- استفاده از `TransformBlock` برای تبدیل داده
- استفاده از `ActionBlock` برای نمایش نتیجه
- پردازش موازی با `MaxDegreeOfParallelism`

### مثال 2: پردازش موازی با بلوک‌های متعدد
نمایش پردازش موازی با چندین بلوک تبدیل که همزمان روی یک داده کار می‌کنند.

**ویژگی‌ها:**
- چندین `TransformBlock` موازی
- استفاده از `JoinBlock` برای ترکیب نتایج
- پردازش همزمان فاکتوریل، مجموع ارقام و بررسی اول بودن

### مثال 3: پایپ لاین پردازش تصویر
شبیه‌سازی یک پایپ لاین پردازش تصویر با مراحل مختلف.

**ویژگی‌ها:**
- پایپ لاین متوالی با مراحل مختلف
- بارگذاری، تغییر اندازه، فیلتر و ذخیره‌سازی
- پردازش موازی در هر مرحله

### مثال 4: پایپ لاین تبدیل داده با فیلتر
استفاده از `BroadcastBlock` برای شاخه‌بندی داده‌ها به چندین بلوک.

**ویژگی‌ها:**
- استفاده از `BroadcastBlock` برای توزیع داده
- پردازش شرطی (زوج/فرد)
- لاگ کردن همه داده‌ها

## مفاهیم کلیدی Dataflow

### انواع بلوک‌ها

1. **BufferBlock<T>**: ذخیره‌سازی داده‌ها
2. **TransformBlock<TInput, TOutput>**: تبدیل داده از یک نوع به نوع دیگر
3. **ActionBlock<T>**: انجام عملیات روی داده بدون بازگشت
4. **BroadcastBlock<T>**: ارسال داده به چندین بلوک
5. **JoinBlock<T1, T2, T3>**: ترکیب داده از چندین بلوک

### تنظیمات مهم

- **MaxDegreeOfParallelism**: حداکثر تعداد تردهای موازی
- **PropagateCompletion**: انتشار اعلام اتمام به بلوک‌های بعدی
- **BoundedCapacity**: محدود کردن ظرفیت بلوک

## نکات مهم

1. همیشه از `PropagateCompletion = true` استفاده کنید تا بلوک‌های بعدی از اتمام پردازش مطلع شوند
2. مقدار `MaxDegreeOfParallelism` را بر اساس نوع کار تنظیم کنید
3. از `BoundedCapacity` برای جلوگیری از مصرف بیش از حد حافظه استفاده کنید
4. برای اتصال بلوک‌ها از `LinkTo` استفاده کنید

